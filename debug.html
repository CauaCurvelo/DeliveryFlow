<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - DeliveryFlow</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background-color: #0a0a0a;
            color: #ffffff;
            padding: 20px;
        }
        
        .debug-section {
            background: #1a1a1a;
            border: 2px solid #333;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
        }
        
        .success {
            color: #4ade80;
        }
        
        .error {
            color: #ef4444;
        }
        
        .warning {
            color: #f59e0b;
        }
        
        h2 {
            margin-bottom: 15px;
            color: #4ade80;
        }
        
        pre {
            background: #0a0a0a;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 12px;
        }
        
        .test-item {
            padding: 8px;
            margin: 5px 0;
            background: #0a0a0a;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1 class="success">üîç DeliveryFlow - Diagn√≥stico Completo</h1>
    
    <div class="debug-section">
        <h2>1. Testes B√°sicos</h2>
        <div id="basic-tests"></div>
    </div>
    
    <div class="debug-section">
        <h2>2. Recursos Carregados</h2>
        <div id="resources"></div>
    </div>
    
    <div class="debug-section">
        <h2>3. Console Logs</h2>
        <pre id="console-logs"></pre>
    </div>
    
    <div class="debug-section">
        <h2>4. Viewport do App Real</h2>
        <div style="border: 2px solid #4ade80; padding: 10px; background: #0a0a0a;">
            <iframe 
                src="http://localhost:3000" 
                style="width: 100%; height: 600px; border: none; background: white;"
                id="app-frame"
            ></iframe>
        </div>
    </div>

    <script>
        const logs = [];
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        
        console.log = function(...args) {
            logs.push({ type: 'log', msg: args.join(' '), time: new Date().toISOString() });
            updateLogs();
            originalLog.apply(console, args);
        };
        
        console.error = function(...args) {
            logs.push({ type: 'error', msg: args.join(' '), time: new Date().toISOString() });
            updateLogs();
            originalError.apply(console, args);
        };
        
        console.warn = function(...args) {
            logs.push({ type: 'warn', msg: args.join(' '), time: new Date().toISOString() });
            updateLogs();
            originalWarn.apply(console, args);
        };
        
        function updateLogs() {
            const logsEl = document.getElementById('console-logs');
            logsEl.textContent = logs.map(l => `[${l.time.split('T')[1]}] ${l.type.toUpperCase()}: ${l.msg}`).join('\n');
        }
        
        // Testes b√°sicos
        const basicTests = document.getElementById('basic-tests');
        const tests = [
            { name: 'JavaScript Funcionando', pass: true },
            { name: 'DOM Ready', pass: document.readyState === 'complete' || document.readyState === 'interactive' },
            { name: 'Fetch API Dispon√≠vel', pass: typeof fetch !== 'undefined' },
            { name: 'LocalStorage Dispon√≠vel', pass: typeof localStorage !== 'undefined' },
        ];
        
        basicTests.innerHTML = tests.map(t => 
            `<div class="test-item ${t.pass ? 'success' : 'error'}">
                ${t.pass ? '‚úÖ' : '‚ùå'} ${t.name}
            </div>`
        ).join('');
        
        // Verificar recursos
        const resourcesEl = document.getElementById('resources');
        setTimeout(() => {
            fetch('http://localhost:3000')
                .then(r => r.text())
                .then(html => {
                    const hasRoot = html.includes('id="root"');
                    const hasScript = html.includes('src="/src/main.tsx"');
                    
                    resourcesEl.innerHTML = `
                        <div class="test-item ${hasRoot ? 'success' : 'error'}">
                            ${hasRoot ? '‚úÖ' : '‚ùå'} HTML cont√©m div#root
                        </div>
                        <div class="test-item ${hasScript ? 'success' : 'error'}">
                            ${hasScript ? '‚úÖ' : '‚ùå'} HTML carrega /src/main.tsx
                        </div>
                        <div class="test-item success">
                            ‚úÖ Servidor respondendo na porta 3000
                        </div>
                    `;
                })
                .catch(e => {
                    resourcesEl.innerHTML = `<div class="test-item error">‚ùå Erro ao buscar recursos: ${e.message}</div>`;
                });
        }, 500);
        
        // Monitorar iframe
        const iframe = document.getElementById('app-frame');
        iframe.onload = function() {
            console.log('‚úÖ Iframe carregado');
            try {
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                const rootEl = iframeDoc.getElementById('root');
                console.log('Root element no iframe:', rootEl);
                console.log('Root innerHTML length:', rootEl ? rootEl.innerHTML.length : 0);
            } catch(e) {
                console.warn('N√£o foi poss√≠vel acessar iframe (CORS):', e.message);
            }
        };
        
        console.log('üöÄ P√°gina de debug carregada');
    </script>
</body>
</html>
