<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Simples - DeliveryFlow Front</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: white;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            color: #4ade80;
        }
        
        .test-result {
            background: #2a2a2a;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #4ade80;
        }
        
        .test-result.fail {
            border-left-color: #ef4444;
        }
        
        pre {
            background: #0a0a0a;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 12px;
        }
        
        .screenshot {
            max-width: 100%;
            border: 2px solid #4ade80;
            border-radius: 8px;
            margin: 10px 0;
        }
        
        button {
            background: #4ade80;
            color: #0a0a0a;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        
        button:hover {
            background: #22c55e;
        }
        
        iframe {
            width: 100%;
            height: 600px;
            border: 3px solid #4ade80;
            border-radius: 8px;
            background: white;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Teste Visual Direto - DeliveryFlow</h1>
        <p>Este teste mostra exatamente o que est√° aparecendo em http://localhost:3000</p>
        
        <div>
            <button onclick="testServer()">1. Testar Servidor</button>
            <button onclick="checkHTML()">2. Verificar HTML</button>
            <button onclick="checkDOM()">3. Inspecionar DOM</button>
            <button onclick="takeScreenshot()">4. Capturar Estado</button>
        </div>
        
        <div id="results"></div>
        
        <h2>Preview do Front:</h2>
        <iframe id="preview" src="http://localhost:3000"></iframe>
    </div>

    <script>
        const resultsDiv = document.getElementById('results');
        
        function addResult(title, content, pass = true) {
            const div = document.createElement('div');
            div.className = `test-result ${pass ? '' : 'fail'}`;
            div.innerHTML = `
                <h3>${pass ? '‚úÖ' : '‚ùå'} ${title}</h3>
                <pre>${content}</pre>
            `;
            resultsDiv.appendChild(div);
            resultsDiv.scrollTop = resultsDiv.scrollHeight;
        }
        
        async function testServer() {
            try {
                const response = await fetch('http://localhost:3000');
                const ok = response.ok;
                addResult(
                    'Servidor Respondendo',
                    `Status: ${response.status} ${response.statusText}\nURL: ${response.url}`,
                    ok
                );
                return ok;
            } catch (e) {
                addResult('Servidor Respondendo', `ERRO: ${e.message}`, false);
                return false;
            }
        }
        
        async function checkHTML() {
            try {
                const response = await fetch('http://localhost:3000');
                const html = await response.text();
                
                const hasRoot = html.includes('id="root"');
                const hasScript = html.includes('src="/src/main.');
                const hasVite = html.includes('/@vite/client');
                
                const report = `
HTML recebido (primeiros 1000 chars):
${html.substring(0, 1000)}

...

Verifica√ß√µes:
- Tem <div id="root">: ${hasRoot ? 'SIM ‚úì' : 'N√ÉO ‚úó'}
- Carrega script principal: ${hasScript ? 'SIM ‚úì' : 'N√ÉO ‚úó'}
- Tem Vite client: ${hasVite ? 'SIM ‚úì' : 'N√ÉO ‚úó'}
                `;
                
                addResult('HTML Verificado', report, hasRoot && hasScript);
            } catch (e) {
                addResult('HTML Verificado', `ERRO: ${e.message}`, false);
            }
        }
        
        async function checkDOM() {
            try {
                const iframe = document.getElementById('preview');
                
                // Aguardar um pouco para garantir que carregou
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                const rootEl = iframeDoc.getElementById('root');
                
                if (!rootEl) {
                    addResult('DOM Inspecionado', 'ERRO: #root n√£o encontrado no DOM!', false);
                    return;
                }
                
                const hasChildren = rootEl.children.length > 0;
                const htmlContent = rootEl.innerHTML;
                const htmlLength = htmlContent.length;
                
                const report = `
Elemento #root encontrado!
- N√∫mero de filhos: ${rootEl.children.length}
- innerHTML length: ${htmlLength}
- Tem conte√∫do: ${hasChildren ? 'SIM ‚úì' : 'N√ÉO ‚úó'}

${htmlLength > 0 ? `Preview do conte√∫do (primeiros 500 chars):
${htmlContent.substring(0, 500)}...` : 'VAZIO - React n√£o renderizou nada!'}

Estilos do body:
- background: ${getComputedStyle(iframeDoc.body).backgroundColor}
- color: ${getComputedStyle(iframeDoc.body).color}
                `;
                
                addResult('DOM Inspecionado', report, hasChildren);
                
                if (!hasChildren) {
                    // Verificar erros no console
                    addResult(
                        'Poss√≠vel Causa',
                        `O #root existe mas est√° vazio. Poss√≠veis causas:
1. Erro de JavaScript impedindo React de montar
2. CSS ocultando os elementos
3. Componente retornando null
4. Problema nas importa√ß√µes CSS

Abra o DevTools (F12) e veja o console para erros!`,
                        false
                    );
                }
            } catch (e) {
                addResult('DOM Inspecionado', `ERRO (possivelmente CORS): ${e.message}\n\nSe for CORS, abra http://localhost:3000 diretamente no navegador e pressione F12 para ver o console.`, false);
            }
        }
        
        async function takeScreenshot() {
            addResult(
                'Captura de Estado',
                `Para capturar o estado atual:
1. Abra http://localhost:3000 em uma nova aba
2. Pressione F12 para abrir DevTools
3. V√° para a aba Console
4. Veja se h√° erros em vermelho
5. V√° para a aba Elements
6. Procure por <div id="root">
7. Veja se tem conte√∫do dentro

Se voc√™ ver "This page is empty" ou tela preta:
- Verifique se h√° erros no Console
- Verifique se o CSS globals.css est√° sendo carregado
- Verifique se React est√° montando corretamente`,
                true
            );
        }
        
        // Auto-executar testes
        window.addEventListener('load', async () => {
            await new Promise(resolve => setTimeout(resolve, 1000));
            await testServer();
            await new Promise(resolve => setTimeout(resolve, 500));
            await checkHTML();
            await new Promise(resolve => setTimeout(resolve, 2000));
            await checkDOM();
        });
    </script>
</body>
</html>
